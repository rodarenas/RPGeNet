{% load staticfiles %}
<html>
<head>
	<title>RPGeNet v2.0 - Retinitis Pigmentosa Gene Network</title>
	<meta name="description" content="RPGeNet v2.0 - Retinitis Pigmentosa Gene Network: interacting with the network of genes related to retinitis pigmentosa genes.">
	<meta name="keywords" content="RPGeNet,retinitis pigmentosa,RP,interaction network,retinal disease,driver genes">
	<link rel="stylesheet" href="{% static 'css/style.css' %}">
	<link rel="stylesheet" href="{% static 'css/cytoscape-navigator.css' %}">
	<link rel="stylesheet" href="{% static 'css/cytoscape-panzoom.css' %}">
	<link rel="stylesheet" href="{% static 'css/bootstrap-min.css' %}">
	<link rel="stylesheet" href="{% static 'css/toggle-switch.css' %}">
	{% if upload_json %}
	<!-- Uploaded json, positions included -->
        <script>
            window.jsongraph = {{ upload_json|safe }};
            window.withpos   = true;
        </script></script>
    {% elif jsongraph %}
    <!-- Graph from normal form request, without positions -->
    	<script>
            window.jsongraph = {{ jsongraph|safe }};
            window.withpos   = false;
        </script></script>

    {% else %}
	<!-- No results -->
		<script type="text/javascript">
			window.noresults = true;
		</script> 
    {% endif %}
</head>

<body>

	<!-- CYTOSCAPE VIEWER -->
	<div id="cyt"></div>

	<!-- CYTOSCAPE CONTROLS -->
	<div id="cyt-controls">

		<!-- Top buttons -->
		<div id="gexplorer-topbtns">
			<a href="/RPGeNet"><div class="btn btn-default"><span class="glyphicon glyphicon-home"> </span> Home</div></a>
			<a href="{% url tutorial %}"><div class="btn btn-default"><span class="glyphicon glyphicon-question-sign"> </span> Tutorial</div></a>
		</div>

		<!-- Logo -->
		<div id="gexplorer-logo-container">
			<img id="gexplorer-logo" src="{% static 'Images/logo.png' %}">
			<span id="gexplorer-title">RPGNet</span>
		</div>

		<!-- On click -->
		<div class="cyt-controls-block">
			<span class="cyt-controls-title">On click</span>
			<fieldset>
				<div class="switch-toggle switch-candy behaviour-div">
					<form action="" id="behaviour-form">
						<input id="radio-props" value="properties" name="behaviour" type="radio">
						<label class="behaviour-btn" for="radio-props" onclick=""><span class="behaviour-btn-text">Node Properties</span></label>
						<input id="radio-add" name="behaviour" type="radio" value="addition" checked>
						<label class="behaviour-btn" for="radio-add" onclick=""><span class="behaviour-btn-text">Node Addition</span></label>
						<input id="radio-delete" value="deletion" name="behaviour" type="radio">
						<label class="behaviour-btn" for="radio-delete" onclick=""><span class="behaviour-btn-text">Node Deletion</span></label>
						<a></a>
					</form>
				</div>
			</fieldset>
		</div>

		<!-- Layout -->
		<div class="cyt-controls-block">
			<span class="cyt-controls-title">Layout</span>
			<select name="layout" class="layout-dropdown form-control" id="layout">
				<option>Dagre</option>
				<option>Cose</option>
				<option>Grid</option>
				<option>Circle</option>
				<option>Concentric</option>
			</select>
		</div>

		<!-- Change level -->
		<div class="cyt-controls-block">
			<span class="cyt-controls-title">Neighbour Nodes</span>
			<div class="row gexplorer-lvl-container">
				<div class="col-sm-3"></div>
				<div class="col-sm-3"><div class="btn btn-default lvl-btn"><span class="glyphicon glyphicon-minus"></span></div></div>
				<div class="col-sm-3"><div class="btn btn-default lvl-btn"><span class="glyphicon glyphicon-plus"></span></div></div>
				<div class="col-sm-3"></div>
			</div>
		</div>

		<!-- Border size -->
		<div class="cyt-controls-block">
			<span class="cyt-controls-title">Border Size</span><br>
			<div class="row bsize-container-parent">
				<div class="bsize-container col-sm-1"></div>
				<div class="bsize-container col-sm-8">
					<input type="range" name="bsize" id="bsize" value="8" min="1" max="15" step="1" oninput="bsizeOutput.value = bsize.value"/>
				</div>
				<div class="bsize-container col-sm-2">
					<output name="bsizeOutput" id="bsizeOutput">8</output>
				</div>
				<div class="bsize-container col-sm-1"></div>
			</div>
		</div>

		<!-- Additional Buttons -->
		<div class="cyt-controls-block">
			<span class="cyt-controls-title">Controls</span>
			<br><br>
			<div class="gexplorer-row row">
				<div class="gexplorer-col col-sm-3"> </div>
				<div class="gexplorer-col col-sm-3">
					<div id="fitscreen-btn" class="gexplorer-btn btn btn-default">
						<span class="glyphicon glyphicon-fullscreen"></span>
						<br><span class="gexplorer-btn-txt">Fit</span>
					</div>
				</div>
				<div class="gexplorer-col col-sm-3">
					<div id="drag-btn" class="gexplorer-btn btn btn-default">
						<img class="glyphicon-grab" src="{% static 'Images/grab.png' %}">
						<br>Drag
					</div>
				</div>
				<div class="gexplorer-col col-sm-3"> </div>
			</div>
			<div class="gexplorer-row row">
				<div class="gexplorer-col col-sm-3"> </div>
				<div class="gexplorer-col col-sm-2">
					<div id="export-tbl" class="gexplorer-btn btn btn-default">
						<span class="glyphicon glyphicon-download-alt"></span>
						<br><span class="gexplorer-btn-txt">Export</span>
					</div>
				</div>
				<div class="gexplorer-col col-sm-2">
					<div id="export-json" class="gexplorer-btn btn btn-default">
						<span class="glyphicon glyphicon-floppy-disk"></span>
						<br><span class="gexplorer-btn-txt">Save</span>
					</div>
				</div>
				<div class="gexplorer-col col-sm-2">
					<a href="#" id="save-image-link">
						<div id="save-img" class="gexplorer-btn btn btn-default">
							<span class="glyphicon glyphicon-picture"></span>
							<br><span class="gexplorer-btn-txt">Image</span>
						</div>
					</a>
				</div>
				<div class="gexplorer-col col-sm-3"> </div>
			</div>
			<div class="gexplorer-row row">
				<div class="gexplorer-col col-sm-3"> </div>
				<div class="gexplorer-col col-sm-6">
					<form enctype="multipart/form-data" method="post" action="{% url gene_explorer %}" id="upload-form">
						{% csrf_token %}

						<label for="myfile" id="upload-json" class="gexplorer-btn btn btn-default ">
							<span class="glyphicon glyphicon-cloud-upload"></span>
							<br><span class="gexplorer-btn-txt">Upload</span>
						</label>
						<input style="display:none" type="file" onchange="this.form.submit()" name="myfile" id="myfile" class="upload" style="box-sizing:border-box;">
					</form>
				</div>
				<div class="col-sm-3"> </div>
			</div>
		</div>

	</div>

	<div id="blur-effect">&nbsp;</div>
	<div id="no-results-dialog">
		<h2>No Results</h2>
		<hr>
		<a href="{% url index_view %}">
			<div class="btn btn-default"><span class="glyphicon glyphicon-circle-arrow-left"></span> Go Back</div>
		</a>
		<form enctype="multipart/form-data" method="post" action="{% url gene_explorer %}" id="upload-form">
			{% csrf_token %}
			<label for="myfile" id="upload-json" class="btn btn-default">
				<span class="glyphicon glyphicon-cloud-upload"></span>
				<span class="gexplorer-btn-txt">Upload Graph</span>
			</label>
			<input style="display:none" type="file" onchange="this.form.submit()" name="myfile" id="myfile" class="upload" style="box-sizing:border-box;">
		</form>
	</div>


	<!-- JAVASCRIPT FILES -->
	<script src="{% static 'js/jquery-min.js' %}"></script>
	<script src="{% static 'js/cytoscape.js' %}"></script>
	<script src="{% static 'js/cytoscape-navigator.js' %}"></script>
	<script src="{% static 'js/cytoscape-panzoom.js' %}"></script>
	<script src="{% static 'js/cytoscape-dagre.js' %}"></script>
	<script src="{% static 'js/bootstrap-min.js' %}"></script>
	<script src="{% static 'js/stoopidoverlay.js' %}"></script>
	<script src="{% static 'js/FileSaver.js' %}"></script>
	<script src="{% static 'js/gexplorer-cytoscape-definition.js' %}"></script>
	<script src="{% static 'js/app.js' %}"></script>
	<script type="text/javascript">
		if (window.noresults) {
			$("#blur-effect").show();
			$("#no-results-dialog").show();
		};
	</script>
</body>
</html>